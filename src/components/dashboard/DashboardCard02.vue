<template>
  <div
    class="col-span-full flex flex-col rounded-xl bg-white shadow-sm dark:bg-gray-800 sm:col-span-6 xl:col-span-4"
  >
    <div class="px-5 pt-5">
      <header class="mb-2 flex items-start justify-between">
        <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100">Acme Advanced</h2>
        <EditMenu align="right" class="relative inline-flex">
          <li>
            <a
              class="flex px-3 py-1 text-sm font-medium text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-200"
              href="#0"
              >Option 1</a
            >
          </li>
          <li>
            <a
              class="flex px-3 py-1 text-sm font-medium text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-200"
              href="#0"
              >Option 2</a
            >
          </li>
          <li>
            <a class="flex px-3 py-1 text-sm font-medium text-red-500 hover:text-red-600" href="#0"
              >Remove</a
            >
          </li>
        </EditMenu>
      </header>
      <div class="mb-1 text-xs font-semibold uppercase text-gray-400 dark:text-gray-500">Sales</div>
      <div class="flex items-start">
        <div class="mr-2 text-3xl font-bold text-gray-800 dark:text-gray-100">$17,489</div>
        <div class="rounded-full bg-red-500/20 px-1.5 text-sm font-medium text-red-700">-14%</div>
      </div>
    </div>
    <!-- Chart built with Chart.js 3 -->
    <div class="grow max-sm:max-h-[128px] xl:max-h-[128px]">
      <!-- Change the height attribute to adjust the chart height -->
      <LineChart :data="chartData" width="389" height="128" />
    </div>
  </div>
</template>

<script>
import { chartAreaGradient } from '@/components/charts/ChartjsConfig'
import { ref } from 'vue'
import LineChart from '../../charts/LineChart01.vue'
import EditMenu from '../../components/DropdownEditMenu.vue'

// Import utilities
import { hexToRGB, tailwindConfig } from '../../utils/Utils'

export default {
  name: 'DashboardCard01',
  components: {
    LineChart,
    EditMenu,
  },
  setup() {
    const chartData = ref({
      labels: [
        '12-01-2022',
        '01-01-2023',
        '02-01-2023',
        '03-01-2023',
        '04-01-2023',
        '05-01-2023',
        '06-01-2023',
        '07-01-2023',
        '08-01-2023',
        '09-01-2023',
        '10-01-2023',
        '11-01-2023',
        '12-01-2023',
        '01-01-2024',
        '02-01-2024',
        '03-01-2024',
        '04-01-2024',
        '05-01-2024',
        '06-01-2024',
        '07-01-2024',
        '08-01-2024',
        '09-01-2024',
        '10-01-2024',
        '11-01-2024',
        '12-01-2024',
        '01-01-2025',
      ],
      datasets: [
        // Indigo line
        {
          data: [
            622, 622, 426, 471, 365, 365, 238, 324, 288, 206, 324, 324, 500, 409, 409, 273, 232,
            273, 500, 570, 767, 808, 685, 767, 685, 685,
          ],
          fill: true,
          backgroundColor: function (context) {
            const chart = context.chart
            const { ctx, chartArea } = chart
            return chartAreaGradient(ctx, chartArea, [
              { stop: 0, color: `rgba(${hexToRGB(tailwindConfig().theme.colors.violet[500])}, 0)` },
              {
                stop: 1,
                color: `rgba(${hexToRGB(tailwindConfig().theme.colors.violet[500])}, 0.2)`,
              },
            ])
          },
          borderColor: tailwindConfig().theme.colors.violet[500],
          borderWidth: 2,
          pointRadius: 0,
          pointHoverRadius: 3,
          pointBackgroundColor: tailwindConfig().theme.colors.violet[500],
          pointHoverBackgroundColor: tailwindConfig().theme.colors.violet[500],
          pointBorderWidth: 0,
          pointHoverBorderWidth: 0,
          clip: 20,
          tension: 0.2,
        },
        // Gray line
        {
          data: [
            732, 610, 610, 504, 504, 504, 349, 349, 504, 342, 504, 610, 391, 192, 154, 273, 191,
            191, 126, 263, 349, 252, 423, 622, 470, 532,
          ],
          borderColor: `rgba(${hexToRGB(tailwindConfig().theme.colors.gray[500])}, 0.25)`,
          borderWidth: 2,
          pointRadius: 0,
          pointHoverRadius: 3,
          pointBackgroundColor: `rgba(${hexToRGB(tailwindConfig().theme.colors.gray[500])}, 0.25)`,
          pointHoverBackgroundColor: `rgba(${hexToRGB(tailwindConfig().theme.colors.gray[500])}, 0.25)`,
          pointBorderWidth: 0,
          pointHoverBorderWidth: 0,
          clip: 20,
          tension: 0.2,
        },
      ],
    })

    return {
      chartData,
    }
  },
}
</script>
